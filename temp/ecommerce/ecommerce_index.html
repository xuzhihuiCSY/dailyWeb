{% extends 'STY.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'ecommerce_styles.css' %}">
{% load humanize %}

<div class="store-container">
    <h1>Store</h1>
    {% if request.user.is_authenticated %}
    <a href="{% url 'ecommerce:cart' %}" class="cart-link">Your shopping cart</a>
    {% endif %}

    <form method="get" action="{% url 'ecommerce:Ecommerce_index' %}">
        <input class="ecommerce_input" type="text" name="q" placeholder="Search products...">
        <button type="submit">Search</button>
    </form>

    {% if products %}
        <ul>
            {% for product in products %}
                <li class="li-ec">
                    <a href="{% url 'ecommerce:product_detail' product.id %}">
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                        <div class="product-name">{{ product.name }}</div>
                    </a>
                    <div class="price">Price: {{ product.price|intcomma }}</div>
                    {% if request.user.is_authenticated %}
                        <a href="{% url 'ecommerce:add_to_cart' product.id %}">Add to cart</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No products found.</p>
    {% endif %}
</div>
{% endblock content %}

